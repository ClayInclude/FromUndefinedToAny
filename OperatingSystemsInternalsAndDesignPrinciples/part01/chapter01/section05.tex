%%
%% Author: Clay
%% 2020/8/20
%%

\section{分级存储体系}
{
    需要权衡考虑存储器的容量、访问时间和成本这三个关键因素。
    往往遵循如下规律：

    \begin{itemize}
        \item 存储时间越快，单位成本越高。
        \item 容量越大，单位成本越低。
        \item 容量越大，存取速度越慢。
    \end{itemize}

    充分利用\emreg{分级存储体系(Memory Hierarchy)}。
    随着层次下移，具有如下特征：

    \begin{itemize}
        \item 单位成本逐层递减
        \item 容量逐层递增
        \item 访问时间逐层递增
        \item 处理器访问存储器的频率逐层递减
    \end{itemize}

    价格较高、容量较小的告诉存储器通常会配备价格低廉、容量较大的慢速存储器作为补充。
    这种架构成功的关键是减少位于较低层的慢速设备的访问频率。原则上可以实现二级存储结构的存储策略，并具备列举的特征1到4。
    现有的存储系统通过多种技术，也都能满足特征1到3。
    幸运的是，特征4通常也是有效的。

    特征4有效的基础是访问的\emreg{局部性原理}。
    在程序的执行过程中，无论是指令还是数据，处理器对存储器的访问都呈现出聚焦访问的特点。
    较短的时间内，处理器主要访问存储器中固定的数据集。
    可以利用数据的层次来组织数据，数据组织层次越低，数据访问的次数也就越少。

    寄存器、高速缓存和内存通常具有易失性，并采用了半导体技术。
    数据一般保存在能永久保存的大容量外部存储设备中，常见的有硬盘和移动存储介质。
    非易失性的外部存储器又称为\emreg{二级存储器(Secondary Memory)}或\emreg{辅助存储器(Auxiliary Memory)}，用于存储程序和数据文件。
    除此之外，硬盘还用于作为内存的扩展，称为虚拟内存。

    内存的一部分可以作为\emreg{缓冲区(Buffer)}，临时保存从磁盘读出的数据。
    该技术有时称为磁盘高速缓存，可以通过下面两种方法改善性能：

    \begin{itemize}
        \item 磁盘成簇写。采用大容量数据少次传递，将数据聚集到一定容量后在进行一次性传输，以改进磁盘性能，并最大限度减少处理器的参与。
        \item 对必定会写出到磁盘的数据，在数据保存到磁盘之间，能从磁盘高速缓存中快速取出。
    \end{itemize}
}
