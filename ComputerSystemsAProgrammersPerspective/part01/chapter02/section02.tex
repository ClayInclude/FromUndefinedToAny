%%
%% Author: Clay
%% 2020/2/27
%%

\section{整数表示}
{
    \subsection{整型数据类型}
    {
        C语言标准只要求正数和负数的取值范围是对称的。
        固定大小的数据类型保证数值与典型数值一致，包括负数与正数的不对称性。
    }

    \subsection{无符号数的编码}
    {
        \begin{defines}[无符号数编码的定义]
            对向量 $\vec x = [x_{w - 1}, x_{w -2}, \cdots, x_0]$ ：

            \begin{align}
                B2U_w(\vec x) = \sum_{i = 0}^{w - 1} x_i2^i
            \end{align}
        \end{defines}

        最小值是用位向量 $[00\cdots0]$ 表示，也就是整数值 $0$ 。
        最大值是用位向量 $[11\cdots1]$ 表示，也就是

        $$UMax_w = \sum_{i = 0}^{w - 1} 2^i = 2^w - 1$$

        因此函数 $B2U_w$ 能被定义为一个映射 $B2U_w: \{0, 1\}^w \rightarrow \{0, \cdots, 2^w - 1\}$ 。

        \begin{defines}[无符号数编码的唯一性]
            函数 $B2U_w$ 是一个双射。
        \end{defines}
    }

    \subsection{补码编码}
    {
        最常见的有符号数的计算机表示方式就是\emreg{补码(two's-complement)}形式。
        在这个定义中，将字的最高有效位解释为\emreg{负权(negative weight)}。

        \begin{defines}[补码编码的定义]
            对向量 $\vec x = [x_{w - 1}, x_{w - 2}, \cdots, x_0]$

            \begin{align}
                B2T_w(\vec x) = -x_{w - 1}2^{w - 1} + \sum_{i = 0}^{w - 2}x_i2^i
            \end{align}
        \end{defines}

        最高有效位 $x_{w - 1}$ 也称为\emreg{符号位}，它的权重为 $-2^{w - 1}$ ，是无符号表示中权重的负数。

        它能表示的最小值是位向量 $[10\cdots0]$ ，其整数值为

        $$TMin_w = -2^{w - 1}$$

        而最大值是 $[01\cdots1]$ ，其整数值为

        $$TMax_w = 2^{w - 1} - 1$$

        可以看出 $B2T_w$ 是一个从长度为 $w$ 的位模式到 $TMin_w \sim TMax_w$ 之间数字的映射 $B2T_w: \{0, 1\}^w \rightarrow \{TMin_w, \cdots, TMax_w\}$ 。

        \begin{defines}补码编码的唯一性
            函数 $B2T_w$ 是一个双射。
        \end{defines}

        %17.
        \begin{practicec}
            \begin{table}[H]
                \[
                    \begin{array}{|c|c|c|c|}
                        \hline
                        \multicolumn{2}{|c|}{\vec x} & \multirow{2}*{$B2U_4(\vec x)$} & \multirow{2}*{$B2T_4(\vec x)$} \\
                        \cline{1-2}
                        \text{十六进制} & \text{二进制} & & \\
                        \hline
                        0xE & 1110 & 14 & -2 \\
                        0x0 & 0000 & 0 & 0 \\
                        0x5 & 0101 & 5 & 5 \\
                        0x8 & 1000 & 8 & -8 \\
                        0xD & 1101 & 13 & -3 \\
                        0xF & 1111 & 15 & -1 \\
                    \end{array}
                \]
            \end{table}
        \end{practicec}

        补码的范围是不对称的： $|TMin| = |TMax| + 1$ ，也就是说， $TMin$ 没有与之对应的正数。
        最大的无符号数值刚好比补码的最大值的两倍大一点： $UMax_w = 2TMax_w + 1$ 。

        %18.
        \begin{practicec}
            \begin{enumerate}[A.]
                \item $0x2E0, 736$
                \item $-0x58, -88$
                \item $0x28, 40$
                \item $-0x30, -48$
                \item $0x78, 120$
                \item $0x88, 136$
                \item $0x1F8, 504$
                \item $0x8, 8$
                \item $0xC0, 192$
                \item $-0x48, -92$
            \end{enumerate}
        \end{practicec}
    }
}
