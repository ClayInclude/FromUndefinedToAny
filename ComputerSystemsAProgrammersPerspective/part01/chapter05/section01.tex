%%
%% Author: Clay
%% 2020/5/21
%%

\section{优化编译器的能力和局限性}
{
    编译器必须很小心地对程序只使用\emreg{安全}的优化。
    对于程序可能遇到的所有可能的情况，在C语言标准提供的保证之下，优化后得到的程序和未优化的版本有一样的行为。

    限制编译器只进行安全的优化，消除了造成不希望的运行时行为的一些可能的原因，但是这也意味着程序员必须花费更大的力气写出编译器能够将之转换成有效机器代码的程序。

    两个指针可能指向同一个内存位置的情况称为\emreg{内存别名使用(memory aliasing)}。
    在只执行安全的优化中，编译器必须假设不同的指针可能会指向内存中同一个位置。
    这造成了一个\emreg{妨碍优化的因素}，这也是可能严重限制编译器产生优化代码机会的程序的一个方面。

    %1.
    \begin{practicec}
        *xp = *yp = 0;
    \end{practicec}

    第二个妨碍优化的因素是函数调用。
    大多数编译器不会试图判断一个函数是否没有副作用。
    相反，编译器会假设最糟的情况，并保持所有的函数调用不变。

    包含函数调用的代码可以用一个称为\emreg{内联函数替换(inlint substitution)}的过程进行优化。
    此时，将函数调用替换为函数体。
    这样的转换既减少了函数调用的开销，也允许对展开的代码做进一步优化。
}
