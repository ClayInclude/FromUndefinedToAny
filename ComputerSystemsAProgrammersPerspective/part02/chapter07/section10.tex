%%
%% Author: Clay
%% 2020/12/22
%%

\section{动态链接共享库}
{
    静态库和所有的软件一样，需要定期维护和更新。
    运行时，这些函数的代码会被复制到每个运行进程的文本段中，这将使对稀缺的内存系统资源的极大浪费。

    \emreg{共享库(shared library)}是致力于解决静态库缺陷的一个现代创新产物。
    共享库是一个目标模块，在运行或加载时，可以加载到任意的内存地址，冰河一个在内存中的程序链接起来。
    这个过程称为\emreg{动态链接(dynamic linking)}，是一个叫做\emreg{动态链接器(dynamic linker)}的程序来执行的。
    共享库也称为\emreg{共享目标shared object, so}。

    在任何给定的文件系统中，对于一个库只有一个.so文件，所有引用该库的可执行目标文件共享这个.so文件中的代码和数据，而不是像静态库的内容那样被复制和嵌入到引用它们的可执行的文件中。
    其次，在内存中，一个共享库的.text节的一个副本可以被不同的正在运行的进程共享。

    动态链接器通过执行下面的重定位完成链接任务：

    \begin{itemize}
        \item 重定位libc.so的文本和数据到某个内存段。
        \item 重定位libvector.so的文本和数据到另一个内存段。
        \item 重定位应用中所有对libc.so和libvector.so定义的符号的引用。
    \end{itemize}
}
